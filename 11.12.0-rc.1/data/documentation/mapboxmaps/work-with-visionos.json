{"metadata":{"role":"article","modules":[{"name":"MapboxMaps"}],"roleHeading":"Article","title":"Work with visionOS"},"identifier":{"url":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Work-with-visionOS","interfaceLanguage":"swift"},"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"text":"Use Mapbox Maps in native applications for Apple Vision Pro.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/com.mapbox.MapboxMaps\/documentation\/Overview","doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps"]]},"sections":[],"seeAlsoSections":[{"generated":true,"title":"Articles","identifiers":["doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Migrate-to-v11","doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/SwiftUI-User-Guide","doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Declarative-Map-Styling","doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Map-Content-Gestures-User-Guide"],"anchor":"Articles"}],"primaryContentSections":[{"content":[{"anchor":"Overview","type":"heading","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"Starting from version ","type":"text"},{"code":"11.2.0-beta.1","type":"codeVoice"},{"type":"text","text":" of Mapbox Maps, you can use the Mapbox Maps SDK in your native application for Apple Vision Pro. Check out the code samples in our "},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/mapbox\/mapbox-maps-ios\/tree\/main\/Sources\/Examples"},{"text":" application on visionOS.","type":"text"}]},{"inlineContent":[{"identifier":"https:\/\/static-assets.mapbox.com\/maps\/ios\/documentation\/maps_vision_os_locations.png","type":"image"}],"type":"paragraph"},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Currently, visionOS is not supported in CocoaPods. Please use SPM or the binary "},{"type":"reference","identifier":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/install\/","isActive":true},{"text":" of MapboxMaps.","type":"text"}]}],"style":"note","type":"aside"},{"text":"Make use of Mapbox Maps on visionOS","anchor":"Make-use-of-Mapbox-Maps-on-visionOS","level":3,"type":"heading"},{"inlineContent":[{"type":"text","text":"Working with Mapbox Maps on visionOS is very similar to iOS. As the entry point to the map, you use "},{"type":"reference","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Map","isActive":true},{"type":"text","text":" if your application uses SwiftUI, and "},{"identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/MapView","type":"reference","isActive":true},{"text":" if the application uses UIKit. You can find more information about SwiftUI support in ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/SwiftUI-User-Guide"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Most of the Maps SDK’s features from iOS are supported on visionOS out-of-the-box. However, there are some platform limitations discussed below."}],"type":"paragraph"},{"level":3,"text":"Limitations","type":"heading","anchor":"Limitations"},{"level":4,"type":"heading","text":"Eye tracking feedback","anchor":"Eye-tracking-feedback"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All the interactive UI elements on vision OS are expected to have visual feedback when the user looks at them. Currently, this effect is only available for native views and can be applied with "},{"identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/hovereffect(_:)","isActive":true,"type":"reference"},{"text":". Mapbox Map renders most of the map content in Metal, which means the hover won’t be available for map symbols, lines, polygons, and others. However, you can use ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/annotations\/view-annotations\/"},{"text":" to place interactive elements onto the map.","type":"text"}]},{"code":["Map {","    \/\/ With point annotations you can handle gestures, but you won't receive visual eye-tracking feedback.","    PointAnnotation(coordinate: coordinate1)","        .onTapGesture {","            print(\"point annotation tapped\")","        }","","    \/\/ With view annotations, you can handle gestures and receive visual feedback.","    MapViewAnnotation(coordinate: coordinate2) {","        Circle()","            .fill(.blue)","            .hoverEffect()","            .onTapGesture {","                print(\"view annotation tapped\")","            }","    }","}"],"type":"codeListing","syntax":"swift"},{"text":"Location services","anchor":"Location-services","type":"heading","level":4},{"type":"paragraph","inlineContent":[{"type":"text","text":"The compass data is not available on the platform, which means if you use "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/PuckBearing\/heading"},{"text":" as a puck bearing source, the user location puck will point to the north.","type":"text"}]},{"inlineContent":[{"text":"To fix that you can disable puck heading.","type":"text"}],"type":"paragraph"},{"code":["Map {","    Puck2D() \/\/ By default, puck doesn't use heading and doesn't draw direction pointer.","}"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Alternatively, you can use you own implementation of heading provider."}]},{"type":"codeListing","code":["struct PuckDemo: View {","    class LocationModel: ObservableObject {","        var locationProvider = AppleLocationProvider()","","        \/\/ A custom heading data","        @Published var heading: Heading = .init(direction: 15, accuracy: 1)","    }","","    @StateObject var model = LocationModel()","","    var body: some View {","        MapReader { proxy in","            Map(initialViewport: .followPuck(zoom: 16, pitch: 0)) {","                Puck2D(bearing: .heading)","            }","            .onAppear {","                proxy.location?.override(","                    locationProvider: model.locationProvider.onLocationUpdate,","                    headingProvider: model.$heading.eraseToSignal())","            }","","        }","    }","}"],"syntax":"swift"}],"kind":"content"}],"references":{"https://docs.mapbox.com/ios/maps/guides/annotations/view-annotations/":{"identifier":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/annotations\/view-annotations\/","title":"view annotations","titleInlineContent":[{"type":"text","text":"view annotations"}],"type":"link","url":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/annotations\/view-annotations\/"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/Declarative-Map-Styling":{"url":"\/documentation\/mapboxmaps\/declarative-map-styling","kind":"article","type":"topic","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Declarative-Map-Styling","title":"Declarative Map Styling","abstract":[{"text":"Simplify runtime style manipulation with declarative syntax.","type":"text"}],"role":"article"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/SwiftUI-User-Guide":{"kind":"article","abstract":[{"text":"Use Mapbox Maps in SwiftUI applications.","type":"text"}],"url":"\/documentation\/mapboxmaps\/swiftui-user-guide","title":"SwiftUI User Guide","role":"article","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/SwiftUI-User-Guide","type":"topic"},"https://docs.mapbox.com/ios/maps/guides/install/":{"title":"distribution","identifier":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/install\/","titleInlineContent":[{"text":"distribution","type":"text"}],"type":"link","url":"https:\/\/docs.mapbox.com\/ios\/maps\/guides\/install\/"},"doc://com.mapbox.MapboxMaps/documentation/Overview":{"identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/Overview","abstract":[],"kind":"article","role":"collection","url":"\/documentation\/overview","title":"MapboxMaps Documentation","type":"topic"},"https://developer.apple.com/documentation/swiftui/view/hovereffect(_:)":{"titleInlineContent":[{"type":"text","text":"hoverEffect"}],"url":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/hovereffect(_:)","title":"hoverEffect","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swiftui\/view\/hovereffect(_:)"},"https://github.com/mapbox/mapbox-maps-ios/tree/main/Sources/Examples":{"titleInlineContent":[{"text":"Examples","type":"text"}],"url":"https:\/\/github.com\/mapbox\/mapbox-maps-ios\/tree\/main\/Sources\/Examples","title":"Examples","type":"link","identifier":"https:\/\/github.com\/mapbox\/mapbox-maps-ios\/tree\/main\/Sources\/Examples"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/Map-Content-Gestures-User-Guide":{"role":"article","type":"topic","kind":"article","url":"\/documentation\/mapboxmaps\/map-content-gestures-user-guide","abstract":[{"text":"Handle Tap and Long Press gestures on Map, Annotations, and Layers.","type":"text"}],"identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Map-Content-Gestures-User-Guide","title":"Map Content Gestures User Guide"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/MapView":{"title":"MapView","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MapView"}],"identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/MapView","role":"symbol","type":"topic","kind":"symbol","abstract":[],"navigatorTitle":[{"text":"MapView","kind":"identifier"}],"url":"\/documentation\/mapboxmaps\/mapview"},"https://static-assets.mapbox.com/maps/ios/documentation/maps_vision_os_locations.png":{"identifier":"https:\/\/static-assets.mapbox.com\/maps\/ios\/documentation\/maps_vision_os_locations.png","variants":[{"url":"https:\/\/static-assets.mapbox.com\/maps\/ios\/documentation\/maps_vision_os_locations.png","traits":["1x","light"]}],"type":"image","alt":"Standard Style on visionOS"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps":{"type":"topic","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps","title":"MapboxMaps","role":"collection","url":"\/documentation\/mapboxmaps","abstract":[{"type":"text","text":"Interactive, thoroughly customizable maps for iOS powered by vector tiles and Metal."}],"kind":"symbol"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/Migrate-to-v11":{"kind":"article","type":"topic","abstract":[{"text":"The Mapbox Maps SDK v11 introduces improvements to how Mapbox works on iOS platforms, as well as changes to how developers use the SDK. This document summarizes the most important changes - such as new features, deprecated APIs, and breaking changes - and walks you through how to upgrade an application using v10 of the Mapbox Maps SDK to v11.","type":"text"}],"role":"article","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Migrate-to-v11","title":"Migrate to v11 from v10","url":"\/documentation\/mapboxmaps\/migrate-to-v11"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/Map":{"type":"topic","abstract":[{"type":"text","text":"A SwiftUI view that displays a Mapbox Map."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Map","kind":"identifier"}],"navigatorTitle":[{"text":"Map","kind":"identifier"}],"title":"Map","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/Map","url":"\/documentation\/mapboxmaps\/map","role":"symbol","kind":"symbol"},"doc://com.mapbox.MapboxMaps/documentation/MapboxMaps/PuckBearing/heading":{"kind":"symbol","role":"symbol","url":"\/documentation\/mapboxmaps\/puckbearing\/heading","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"heading"}],"type":"topic","title":"PuckBearing.heading","identifier":"doc:\/\/com.mapbox.MapboxMaps\/documentation\/MapboxMaps\/PuckBearing\/heading","abstract":[{"text":"The puck should set its bearing using ","type":"text"},{"type":"codeVoice","code":"heading: CLHeading"},{"type":"text","text":". Bearing will mimic user’s"},{"type":"text","text":" "},{"text":"spatial orientation.","type":"text"}]}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"op":"replace","value":"occ","path":"\/identifier\/interfaceLanguage"}]}]}